<div id="unActiveMail" *ngIf="!activated">
    <p>–ó–∞ –¥–∞ —Å–ø–æ–¥–µ–ª–∏—Ç–µ —á–∞–ª–∏–Ω–¥–∂, —Ç—Ä—è–±–≤–∞ –¥–∞ —Å—Ç–µ –ø–æ—Ç–≤—ä—Ä–¥–∏–ª–∏ e-mail –∞–¥—Ä–µ—Å–∞ —Å–∏!</p>
    <button (click)="confirmMail()" class="confirmMail">–ü–æ—Ç–≤—ä—Ä–¥–∏ e-mail</button>
</div>

<form #form="ngForm" class="container" id="upload" *ngIf="activated" (ngSubmit)="uploadChalangeHandler(form)">
    <div id="loading" *ngIf="loading">
        <img src="assets/images/loading.gif" alt="loading">
    </div>
    <ng-container *ngIf="!loading">
        <h1>–ö–∞—á–∏ <strong>–ø—Ä–µ–¥–∏–∑–≤–∏–∫–∞—Ç–µ–ª—Å—Ç–≤–æ—Ç–æ</strong> —Å–∏!</h1>
        <p>–ó–∞–≥–ª–∞–≤–∏–µ: </p>
        <input type="text" placeholder="–í–∏—Ö—Ä–µ–Ω –ø—Ä–µ–∑ —è–Ω—É–∞—Ä–∏ –∏ —Ç–æ –ß–ò–°–¢–û –ë–û–°!" name="title" [(ngModel)]="uploadData.title" #title="ngModel" required minlength="7">
        <ng-container *ngIf="title.touched">
            <p class="error" *ngIf="title.errors?.['required']">
                –ó–∞–≥–ª–∞–≤–∏–µ—Ç–æ –µ –∑–∞–¥—ä—á–ª–∂–∏—Ç–µ–ª–Ω–æ!
            </p>
            <p class="error" *ngIf="title.errors?.['minlength']">
                –ó–∞–≥–ª–∞–≤–∏–µ—Ç–æ —Ç—Ä—è–±–≤–∞ –¥–∞ –µ –ø–æ-–¥—ä–ª–≥–æ –æ—Ç 6 –∑–Ω–∞–∫–∞!
            </p>
        </ng-container>
        <p>–û–ø–∏—Å–∞–Ω–∏–µ: </p>
        <textarea name="description" [(ngModel)]="uploadData.description" #descriptionLocal="ngModel" required minlength="20" type="text" placeholder="–ó–∞ 2 –¥–Ω–∏ —Ç—Ä—è–±–≤–∞ –¥–∞ –∫–∞—á–∞ **–í–ò–•–†–ï–ù** –∏ —Ç–æ <u>*—á–∏—Å—Ç–æ –±–æ—Å*</u>" (input)="descriptionChangedHandler($event)"></textarea>
        <ng-container *ngIf="descriptionLocal.touched">
            <p class="error" *ngIf="descriptionLocal.errors?.['required']">
                –û–ø–∏—Å–∞–Ω–∏–µ—Ç–æ –µ –∑–∞–¥—ä—á–ª–∂–∏—Ç–µ–ª–Ω–æ!
            </p>
            <p class="error" *ngIf="descriptionLocal.errors?.['minlength']">
                –û–ø–∏—Å–∞–Ω–∏–µ—Ç–æ —Ç—Ä—è–±–≤–∞ –¥–∞ –µ –ø–æ–Ω–µ 20 –∑–Ω–∞–∫–∞!
            </p>
        </ng-container>
        <div *ngIf="description" class="description_preview" markdown [data]="description"></div>
        <p>–ú–∏–Ω–∏–∞—Ç—é—Ä–∞: </p>
        <button type="button" id="chooseImage"><label for="file" class="btn">–ò–∑–±–µ—Ä–∏ —Å–Ω–∏–º–∫–∞</label></button>
        <input style="display: none;" id="file" type="file" accept="image/*" name="image" id="file" #image="ngModel" ngModel (change)="fileChoosen($event)">
        <div class="miniature" *ngIf="url">
            <img [src]="url">
        </div>
        <p id="statusP">–†–∞–∑–≤–∏—Ç–∏–µ: </p>
        <select id="chooseStatus" name="status" #status="ngModel" [(ngModel)]="uploadData.status">
            <option value="–ø–ª–∞–Ω–∏—Ä–∞–Ω">–ü–ª–∞–Ω–∏—Ä–∞–Ω üü°</option>
            <option value="–∑–∞–ø–æ—á–Ω–∞—Ç">–ó–∞–ø–æ—á–Ω–∞—Ç üü¢</option>
            <option value="–∑–∞–≤—ä—Ä—à–µ–Ω">–ó–∞–≤—ä—Ä—à–µ–Ω üèÅ</option>
        </select>
        <div id="content" *ngIf="status.value !== '–ø–ª–∞–Ω–∏—Ä–∞–Ω'">
            <br>
            <hr>
            <h2>–ö–∞—á–∞—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç–Ω–æ—Å—Ç–Ω–æ {{status.value === '–∑–∞–ø–æ—á–Ω–∞—Ç' ? '–∑–∞–≤—ä—Ä—à–µ–Ω–∞—Ç–∞ —á–∞—Å—Ç –Ω–∞ –ø—Ä–µ–¥–∏–∑–≤–∏–∫–∞—Ç–µ–ª—Å—Ç–≤–æ—Ç–æ' : '–ø—Ä–µ–¥–∏–∑–≤–∏–∫–∞—Ç–µ–ª—Å—Ç–≤–æ—Ç–æ'}}</h2>
            <div id="part" *ngFor="let part of parts; let i = index">
                <div id="removeStep" (click)="parts.splice(parts.indexOf(i), 1); images.splice(i, 1); uploadData.steps.splice(i, 1)">x</div>
                <h3>{{stepTitle.value ? stepTitle.value : '–°—Ç—ä–ø–∫–∞ ‚Ññ'+(i+1)}}</h3>
                <p>–ó–∞–≥–ª–∞–≤–∏–µ: </p>
                <input [name]="'titleStep'+i" [(ngModel)]="uploadData.steps[i].title" #titleStep="ngModel" required minlength="7" type="text" placeholder="–î–æ 5–∫–º –Ω–∞–¥–º–æ—Ä—Å–∫–∞ –≤–∏—Å–æ—á–∏–Ω–∞." #stepTitle="ngModel" ngModel [name]="'stepTitle'+i">
                <ng-container *ngIf="title.touched">
                    <p class="error" *ngIf="title.errors?.['required']">
                        –ó–∞–≥–ª–∞–≤–∏–µ—Ç–æ –µ –∑–∞–¥—ä—á–ª–∂–∏—Ç–µ–ª–Ω–æ!
                    </p>
                    <p class="error" *ngIf="title.errors?.['minlength']">
                        –ó–∞–≥–ª–∞–≤–∏–µ—Ç–æ —Ç—Ä—è–±–≤–∞ –¥–∞ –µ –ø–æ-–¥—ä–ª–≥–æ –æ—Ç 6 –∑–Ω–∞–∫–∞!
                    </p>
                </ng-container>
                <p>–°—ä–±–∏—Ç–∏—è –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: </p>
                <textarea [name]="'descriptionStep' + i" [(ngModel)]="uploadData.steps[i].description" #descriptionStep="ngModel" required minlength="20" type="text" placeholder="–ü—ä—Ç—è—Ç –ø—Ä–µ–º–∏–Ω–∞ –ª–µ–∫–æ, –∫–∞—Ç–æ –≤–µ—á–µ—Ä—Ç–∞ –ø–æ—á—Ç–∏ –Ω–µ —Å–ø—è—Ö. –ì–ª–µ–¥–∫–∏—Ç–µ –±—è—Ö–∞ —á—É–¥–µ—Å–Ω–∏, –∞ —Ö–æ—Ä–∞—Ç–∞ - –º–∏–ª–∏, –∫–∞–∫—Ç–æ –≤–∏–Ω–∞–≥–∏. –£–ª–µ–∫–Ω–∞—Ö —Å –Ω—è–∫–æ–ª–∫–æ —Å—Ç–æ—Ç–∞—á–∫–∏ –Ω–∞ –ø—ä—Ä–≤–∞—Ç–∞ —Å—Ç—ä–ª–±–∞ –Ω–∞–¥ –ø—ä—Ä–≤–∞—Ç–∞ —Ü–µ–ø–Ω–∞—Ç–∏–Ω–∞, –Ω–æ –Ω—è–º–∞—à–µ –¥—Ä—É–≥–∏ –Ω–µ–æ—á–∞–∫–≤–∞–Ω–∏ –ø–ª–∞—â–∞–Ω–∏—è. –ù–∞ –Ω—è–∫–æ–ª–∫–æ –ø—ä—Ç–∏ —Å—Ä–µ—â–Ω–∞—Ö –º–µ—á–∫–∞ –≤ –≥–æ—Ä–∞—Ç–∞. –ü–æ –ø—ä—Ç—è —Å–µ –∑–∞–ø–æ–∑–Ω–∞—Ö —Å –º–Ω–æ–≥–æ –∏ –º–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∏ —Ö–æ—Ä–∞."></textarea>
                <ng-container *ngIf="descriptionStep.touched">
                    <p class="error" *ngIf="descriptionStep.errors?.['required']">
                        –û–ø–∏—Å–∞–Ω–∏–µ—Ç–æ –µ –∑–∞–¥—ä—á–ª–∂–∏—Ç–µ–ª–Ω–æ!
                    </p>
                    <p class="error" *ngIf="descriptionStep.errors?.['minlength']">
                        –û–ø–∏—Å–∞–Ω–∏–µ—Ç–æ —Ç—Ä—è–±–≤–∞ –¥–∞ –µ –ø–æ–Ω–µ 20 –∑–Ω–∞–∫–∞!
                    </p>
                </ng-container>
                <p>–°–Ω–∏–º–∫–∏ –∏ –≤–∏–¥–µ–∞: </p>
                <button type="button" id="chooseImage" *ngIf="!images || (images && !images[i])"><label [for]="'fileStep'+i" class="btn">–ö–∞—á–∏ —Å–Ω–∏–º–∫–∞ –∏–ª–∏ –≤–∏–¥–µ–æ</label></button>
                <input style="display: none;" id="file" type="file" accept="image/*, video/*" [name]="'fileStep' + i" [id]="'fileStep'+i" #image="ngModel" ngModel (change)="uploadImage($event, i)">
                <div class="imagesContainer" *ngIf="images && images[i]">
                    <ng-container *ngFor="let imageE of images[i]">
                        <div id="removeStepImage" (click)="removeImageHandler(i, imageE)">x</div>
                        <img *ngIf="imageE[1] == 'image'" [src]="imageE[0]">
                        <video *ngIf="imageE[1] == 'video'" [src]="imageE[0]" controls></video>
                    </ng-container>
                    <button type="button" id="chooseImage"><label [for]="'fileStep'+i" class="btn">–ö–∞—á–∏ —Å–Ω–∏–º–∫–∞ –∏–ª–∏ –≤–∏–¥–µ–æ</label></button>
                </div>
                <p>–ù–∞—á–∞–ª–æ –Ω–∞ —Å—Ç—ä–ø–∫–∞—Ç–∞: </p>
                <input type="text" placeholder="5 —è–Ω—É–∞—Ä–∏, 04:50—á, 2022–≥" [name]="'startStep'+i" [(ngModel)]="uploadData.steps[i].start" #startStep="ngModel" required pattern="([0-9]?)+[0-9]+ +[–∞-—è]+, +[0-9]+[0-9]+:+[0-9]+[0-9]+—á+,+ +[0-9]+[0-9]+[0-9]+[0-9]+–≥+\.">
                <ng-container *ngIf="startStep.touched">
                    <p class="error" *ngIf="startStep.errors?.['required']">
                        –í—Ä–µ–º–µ—Ç–æ –Ω–∞ –Ω–∞—á–∞–ª–æ—Ç–æ –Ω–∞ —Å—Ç—ä–ø–∫–∞—Ç–∞ –µ –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ!
                    </p>
                    <p class="error" *ngIf="startStep.errors?.['pattern']">
                        –í—Ä–µ–º–µ—Ç–æ –Ω–∞ –Ω–∞—á–∞–ª–æ—Ç–æ –Ω–∞ —Å—Ç—ä–ø–∫–∞—Ç–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ –±—ä–¥–µ –≤—ä–≤ —Ñ–æ—Ä–º–∞—Ç: (–¥–µ–Ω –æ—Ç –º–µ—Å–µ—Ü–∞) (–º–µ—Å–µ—Ü), (—á–∞—Å):(–º–∏–Ω)—á, (–≥–æ–¥–∏–Ω–∞)–≥. <br> –ü—Ä–∏–º–µ—Ä: 16 —è–Ω—É–∞—Ä–∏, 10:45—á, 2022–≥.
                    </p>
                </ng-container>
                <p>–ö—Ä–∞–π –Ω–∞ —Å—Ç—ä–ø–∫–∞—Ç–∞: </p>
                <input type="text" placeholder="6 —è–Ω—É–∞—Ä–∏, 19:20—á, 2022–≥." [name]="'endStep'+i" [(ngModel)]="uploadData.steps[i].end" #endStep="ngModel" required pattern="([0-9]?)+[0-9]+ +[–∞-—è]+, +[0-9]+[0-9]+:+[0-9]+[0-9]+—á+,+ +[0-9]+[0-9]+[0-9]+[0-9]+–≥+\.">
                <ng-container *ngIf="endStep.touched">
                    <p class="error" *ngIf="endStep.errors?.['required']">
                        –í—Ä–µ–º–µ—Ç–æ –Ω–∞ –Ω–∞—á–∞–ª–æ—Ç–æ –Ω–∞ —Å—Ç—ä–ø–∫–∞—Ç–∞ –µ –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ!
                    </p>
                    <p class="error" *ngIf="endStep.errors?.['pattern']">
                        –í—Ä–µ–º–µ—Ç–æ –Ω–∞ –Ω–∞—á–∞–ª–æ—Ç–æ –Ω–∞ —Å—Ç—ä–ø–∫–∞—Ç–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ –±—ä–¥–µ –≤—ä–≤ —Ñ–æ—Ä–º–∞—Ç: (–¥–µ–Ω –æ—Ç –º–µ—Å–µ—Ü–∞) (–º–µ—Å–µ—Ü), (—á–∞—Å):(–º–∏–Ω)—á, (–≥–æ–¥–∏–Ω–∞)–≥. <br> –ü—Ä–∏–º–µ—Ä: 16 —è–Ω—É–∞—Ä–∏, 10:45—á, 2022–≥.
                    </p>
                </ng-container>
            </div>
            <br>
            <button type="button" (click)="parts.push(parts[parts.length-1]+1); uploadData.steps?.push({title: '',description: '',start: '',end: '', images: []})">–î–û–ë–ê–í–ò –°–¢–™–ü–ö–ê</button>
        </div>
        <button id="submit" type="submit" [disabled]="form.invalid">{{id ? '–ü–†–û–ú–ï–ù–ò' : '–°–ü–û–î–ï–õ–ò'}} <img src="assets/svg/share-from-square-solid.svg" alt="—Å–ø–æ–¥–µ–ª–∏ –∏–∫–æ–Ω–∫–∞"></button>
    </ng-container>
</form>
<br><br>